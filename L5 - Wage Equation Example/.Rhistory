table(data$ED,data2$ED_LEVEL)
reg_1 <- feols(LWAGE ~ ED + EXP + EXP2 + WKS + OCC + SOUTH + SMSA
+ MS + UNION + FEM, data = data)
# dropping the constant
reg_2 <- feols(LWAGE ~ -1 + i(ED_LEVEL) + EXP + EXP2 + WKS + OCC + SOUTH + SMSA
+ MS + UNION + FEM, data = data2)
# not dropping the constant -- which category is omitted?
reg_3 <- feols(LWAGE ~ 1+ i(ED_LEVEL) + EXP + EXP2 + WKS + OCC + SOUTH + SMSA
+ MS + UNION + FEM, data = data2)
# change the omitted category -- how do coefficients change?
reg_4 <- feols(LWAGE ~ 1+ i(ED_LEVEL,ref="COL") + EXP + EXP2 + WKS + OCC + SOUTH + SMSA
+ MS + UNION + FEM, data = data2)
etable(list(reg_1,reg_2,reg_3,reg_4), export='./table_1.png')
suppressMessages(library(car))
suppressMessages(library(sandwich))
# separate male and female categories
data3 <- data2 %>% mutate(MALE = ifelse(FEM == 1, 0, 1))
reg_5 <- feols(LWAGE ~ -1 + ED + EXP + EXP2 + WKS + OCC + SOUTH + SMSA
+ MS + UNION + FEM + MALE, data = data3)
f5<-linearHypothesis(reg_5, c("FEM = MALE"), vcoev = vcovHC(reg_5, type = "HC1"))$Chisq
# now with intercept and different (but equivalent) hypothesis test
reg_6 <- feols(LWAGE ~ 1 + ED + EXP + EXP2 + WKS + OCC + SOUTH + SMSA
+ MS  + UNION +FEM, data = data3)
f6<-linearHypothesis(reg_6, c("FEM = 0"), vcov = vcovHC(reg_6, type = "HC1"))$Chisq
data3 <- data2 %>% mutate(MALE = ifelse(FEM == 1, 0, 1))
reg_5 <- feols(LWAGE ~ -1 + ED + EXP + EXP2 + WKS + OCC + SOUTH + SMSA
+ MS + UNION + FEM + MALE, data = data3)
# now with intercept and different (but equivalent) hypothesis test
reg_6 <- feols(LWAGE ~ 1 + ED + EXP + EXP2 + WKS + OCC + SOUTH + SMSA
+ MS  + UNION +FEM, data = data3)
print(linearHypothesis(reg_5, c("FEM = MALE"), vcoev = vcovHC(reg_5, type = "HC1")))
print(linearHypothesis(reg_6, c("FEM = 0"), vcov = vcovHC(reg_6, type = "HC1")))
data3 <- data2 %>% mutate(MALE = ifelse(FEM == 1, 0, 1))
reg_5 <- feols(LWAGE ~ -1 + ED + EXP + EXP2 + WKS + OCC + SOUTH + SMSA
+ MS + UNION + FEM + MALE, data = data3)
# now with intercept and different (but equivalent) hypothesis test
reg_6 <- feols(LWAGE ~ 1 + ED + EXP + EXP2 + WKS + OCC + SOUTH + SMSA
+ MS  + UNION + FEM, data = data3)
reg_5
reg_6
5.245465 -4.856244
print(linearHypothesis(reg_5, c("FEM = MALE"), vcoev = vcovHC(reg_5, type = "HC1")))
print(linearHypothesis(reg_6, c("FEM = 0"), vcov = vcovHC(reg_6, type = "HC1")))
print(linearHypothesis(reg_5, c("FEM = MALE"),
vcoev = vcovHC(reg_5, type = "HC1")))
print(linearHypothesis(reg_6, c("FEM = 0"),
vcov = vcovHC(reg_6, type = "HC1")))
reg_7 <- feols(LWAGE ~ ED + EXP + EXP2 + WKS + OCC + SOUTH + SMSA
+ MS + UNION + FEM, data %>% filter(LWAGE>=6))
summary(reg_7)
data
summary(data)
dims(data)
dim(data)
# Number of observations
n <- 200
# Generate random data
# Random integer values between 18 and 65
AGE <- sample(22:65, n, replace = TRUE)
# same as age-22 but one less for some observations
EXP <- AGE - 22 - rbinom(n=n,size=1,prob=0.4)
EXP[EXP < 0] <- 0 # replace negative values with 0
LWAGE = 2.5 + .02*AGE + .03*EXP + .5*rnorm(n)
# create data frame
df <- data.frame(LWAGE,AGE,EXP)
reg <- lm(LWAGE ~ AGE + EXP, data = df) # estimate OLS
summary(reg)
linearHypothesis(reg,c("AGE+EXP=0"),
vcov = vcovHC(reg, type = "HC1"))
reg <- feols(LWAGE ~ AGE + EXP, data = df) # estimate OLS
summary(reg)
linearHypothesis(reg,c("AGE+EXP=0"),
vcov = vcovHC(reg, type = "HC1"))
install.packages('marignaleffects')
install.packages('marginaleffects')
library(marginaleffects)
table(data$ED)
low_wage_data <- subset(data, LWAGE<6)
table(low_wage_data$ED)
library(alr3)
install.packages('alr3')
marginaleffects::avg_slopes(reg_6)
reg_1 <- feols(LWAGE ~ ED + EXP + i(EXP^2) + WKS + OCC + SOUTH + SMSA
+ MS + UNION + FEM, data = data)
reg_1 <- feols(LWAGE ~ ED + EXP + I(EXP^2) + WKS + OCC + SOUTH + SMSA
+ MS + UNION + FEM, data = data)
suppressMessages(library(tidyverse))
suppressMessages(library(fixest))
suppressMessages(library(marginaleffects))
# first, the Cornwell and Rupert regression
data <- read.csv('./cornwell-rupert.csv')
# see counts of each education level
data2<-data %>% mutate(ED_LEVEL=cut(ED,c(0,8,11,12,15,16,17),
labels = c("NOHS", "SOMEHS", "HS", "SOMECOL","COL","POST"),
right=TRUE))
# check that we did it correctly
table(data$ED,data2$ED_LEVEL)
reg_1 <- feols(LWAGE ~ ED + EXP + I(EXP^2) + WKS + OCC + SOUTH + SMSA
+ MS + UNION + FEM, data = data)
# dropping the constant
reg_2 <- feols(LWAGE ~ -1 + i(ED_LEVEL) + EXP + I(EXP^2) + WKS + OCC + SOUTH + SMSA
+ MS + UNION + FEM, data = data2)
# not dropping the constant -- which category is omitted?
reg_3 <- feols(LWAGE ~ 1+ i(ED_LEVEL) + EXP + I(EXP^2) + WKS + OCC + SOUTH + SMSA
+ MS + UNION + FEM, data = data2)
# change the omitted category -- how do coefficients change?
reg_4 <- feols(LWAGE ~ 1+ i(ED_LEVEL,ref="COL") + EXP + I(EXP^2) WKS + OCC + SOUTH + SMSA
suppressMessages(library(tidyverse))
suppressMessages(library(fixest))
suppressMessages(library(marginaleffects))
# first, the Cornwell and Rupert regression
data <- read.csv('./cornwell-rupert.csv')
# see counts of each education level
data2<-data %>% mutate(ED_LEVEL=cut(ED,c(0,8,11,12,15,16,17),
labels = c("NOHS", "SOMEHS", "HS", "SOMECOL","COL","POST"),
right=TRUE))
# check that we did it correctly
table(data$ED,data2$ED_LEVEL)
reg_1 <- feols(LWAGE ~ ED + EXP + I(EXP^2) + WKS + OCC + SOUTH + SMSA
+ MS + UNION + FEM, data = data)
# dropping the constant
reg_2 <- feols(LWAGE ~ -1 + i(ED_LEVEL) + EXP + I(EXP^2) + WKS + OCC + SOUTH + SMSA
+ MS + UNION + FEM, data = data2)
# not dropping the constant -- which category is omitted?
reg_3 <- feols(LWAGE ~ 1+ i(ED_LEVEL) + EXP + I(EXP^2) + WKS + OCC + SOUTH + SMSA
+ MS + UNION + FEM, data = data2)
# change the omitted category -- how do coefficients change?
reg_4 <- feols(LWAGE ~ 1+ i(ED_LEVEL,ref="COL") + EXP + I(EXP^2) +  WKS + OCC + SOUTH + SMSA
+ MS + UNION + FEM, data = data2)
etable(list(reg_1,reg_2,reg_3,reg_4), export='./table_1.png')
reg_4
summary(reg_4)
mfx <- marginaleffects(reg_1, variables = "EXP")
library(marginaleffects)
mfx <- marginaleffects(reg_1, variables = "EXP")
mfx <- avg_slopes(reg_1, variables = "EXP")
head(mfx)
avg_slopes(reg_1, variables = "EXP")
avg_slopes(reg_1, variables = "EXP", vcov = "HC1")
)
avg_slopes(reg_1, variables = "EXP", vcov = "HC1")
library(marginaleffects)
avg_slopes(reg_1, variables = "EXP", vcov = "HC1")
etable(list(reg_1,reg_2,reg_3,reg_4), export='./table_1.png')
install.packages('pdftools')
etable(list(reg_1,reg_2,reg_3,reg_4), export='./table_1.png')
etable(list(reg_1,reg_2,reg_3,reg_4), export='./table_1.pdf')
etable(list(reg_1,reg_2,reg_3,reg_4), export='./table_1.pdf')
etable(list(reg_1,reg_2,reg_3,reg_4), export='./table_1.png')
suppressMessages(library(car))
suppressMessages(library(sandwich))
# separate male and female categories
data3 <- data2 %>% mutate(MALE = ifelse(FEM == 1, 0, 1))
reg_5 <- feols(LWAGE ~ -1 + ED + EXP + I(EXP^2) + WKS + OCC + SOUTH + SMSA
+ MS + UNION + FEM + MALE, data = data3)
# now with intercept and different (but equivalent) hypothesis test
reg_6 <- feols(LWAGE ~ 1 + ED + EXP + I(EXP^2)  + WKS + OCC + SOUTH + SMSA
+ MS  + UNION + FEM, data = data3)
print(linearHypothesis(reg_5, c("FEM = MALE"),
vcoev = vcovHC(reg_5, type = "HC1")))
print(linearHypothesis(reg_6, c("FEM = 0"),
vcov = vcovHC(reg_6, type = "HC1")))
library(marginaleffects)
avg_slopes(reg_1, variables = "EXP", vcov = "HC1")
library(marginaleffects)
avg_slopes(reg_2, variables = "EXP", vcov = "HC1")
reg_wrong <- feols(LWAGE ~ -1 + i(ED_LEVEL) + EXP + EXP2 + WKS + OCC +
SOUTH + SMSA + MS + UNION + FEM, data = data %>% mutate(EXP2 = EXP^2))
suppressMessages(library(tidyverse))
suppressMessages(library(fixest))
suppressMessages(library(marginaleffects))
# first, the Cornwell and Rupert regression
data <- read.csv('./cornwell-rupert.csv') %>%
mutate(ED_LEVEL=cut(ED,c(0,8,11,12,15,16,17),
labels = c("NOHS", "SOMEHS", "HS", "SOMECOL","COL","POST"),
right=TRUE))
# check that we did it correctly
table(data$ED,data2$ED_LEVEL)
reg_1 <- feols(LWAGE ~ ED + EXP + I(EXP^2) + WKS + OCC + SOUTH + SMSA
+ MS + UNION + FEM, data = data)
# dropping the constant
reg_2 <- feols(LWAGE ~ -1 + i(ED_LEVEL) + EXP + I(EXP^2) + WKS + OCC +
SOUTH + SMSA + MS + UNION + FEM, data = data)
# not dropping the constant -- which category is omitted?
reg_3 <- feols(LWAGE ~ 1+ i(ED_LEVEL) + EXP + I(EXP^2) + WKS + OCC +
SOUTH + SMSA + MS + UNION + FEM, data = data)
# change the omitted category -- how do coefficients change?
reg_4 <- feols(LWAGE ~ 1+ i(ED_LEVEL,ref="COL") + EXP + I(EXP^2) +
WKS + OCC + SOUTH + SMSA + MS + UNION + FEM, data = data)
etable(list(reg_1,reg_2,reg_3,reg_4), export='./table_1.png')
reg_wrong <- feols(LWAGE ~ -1 + i(ED_LEVEL) + EXP + EXP2 + WKS + OCC +
SOUTH + SMSA + MS + UNION + FEM, data = data %>% mutate(EXP2 = EXP^2))
reg_wrong
suppressMessages(library(car))
suppressMessages(library(sandwich))
# separate male and female categories
data3 <- data2 %>% mutate(MALE = ifelse(FEM == 1, 0, 1))
reg_5 <- feols(LWAGE ~ -1 + ED + EXP + I(EXP^2) + WKS + OCC + SOUTH + SMSA
+ MS + UNION + FEM + MALE, data = data3)
# now with intercept and different (but equivalent) hypothesis test
reg_6 <- feols(LWAGE ~ 1 + ED + EXP + I(EXP^2)  + WKS + OCC + SOUTH + SMSA
+ MS  + UNION + FEM, data = data3)
print(linearHypothesis(reg_5, c("FEM = MALE"),
vcoev = vcovHC(reg_5, type = "HC1")))
print(linearHypothesis(reg_6, c("FEM = 0"),
vcov = vcovHC(reg_6, type = "HC1")))
library(marginaleffects)
# dropping the constant
reg_wrong <- feols(LWAGE ~ -1 + i(ED_LEVEL) + EXP + EXP2 + WKS + OCC +
SOUTH + SMSA + MS + UNION + FEM, data = data %>% mutate(EXP2 = EXP^2))
avg_slopes(reg_2, variables = "EXP", vcov = "HC1")
avg_slopes(reg_wrong, variables = "EXP", vcov = "HC1")
avg_slopes(reg_2, variables = "EXP", vcov = "HC1")
# don't use the I() to construct interations
reg_wrong <- feols(LWAGE ~ -1 + i(ED_LEVEL) + EXP + EXP2 + WKS + OCC +
SOUTH + SMSA + MS + UNION + FEM, data = data %>% mutate(EXP2 = EXP^2))
avg_slopes(reg_wrong, variables = "EXP", vcov = "HC1")
avg_slopes(reg_2, variables = "EXP", vcov = "HC1")
# don't use the I() to construct interations
reg_wrong <- feols(LWAGE ~ -1 + i(ED_LEVEL) + EXP + EXP2 + WKS + OCC +
SOUTH + SMSA + MS + UNION + FEM,
data = data %>% mutate(EXP2 = EXP^2))
avg_slopes(reg_wrong, variables = "EXP", vcov = "HC1")
# don't use the I() to construct interactions
reg_wrong <- feols(LWAGE ~ -1 + i(ED_LEVEL) + EXP + EXP2 + WKS + OCC +
SOUTH + SMSA + MS + UNION + FEM,
data = data %>% mutate(EXP2 = EXP^2))
avg_slopes(reg_wrong, variables = "EXP", vcov = "HC1")
reg_2
reg_2$coefficients
reg_2$coefficients$EXP
reg_2$coefficients
reg_2$coefficients$names
reg_2$coefficients[8]
reg_2$coefficients[7]
reg_2$coefficients[7] + reg_2$coefficients[8]
reg_2$coefficients[7] + 2 * reg_2$coefficients[8]
weights
data
dims(data)
dim(data)
rmultinom(dim(data)[1])
rmultinom(dim(data)[0])
dims(data)
dim(data)[0]
dim(data)[1]
rmultinom(dim(data)[1],dim(data)[1])
rmultinom(dim(data)[1],dim(data)[1],prob = 1/dim(data)[1])
rmultinom(dim(data)[1],dim(data)[1],prob = 1/dim(data)[1])
rmultinom(dim(data)[1],1,prob = 1/dim(data)[1])
rmultinom()
?rmultinom
rmultinom(1,dim(data)[1],prob = 1/dim(data)[1])
rmultinom(1,dim(data)[1],prob = 1/dim(data)[1])
rmultinom(1,dim(data)[1],prob = 1/dim(data)[1])
sample
sample
rep(1)
ones()
rep(1/N)
rep(1/4165)
rep(1/4165,4165)
n <- dim(data)[1]
rmultinom(500,n,rep(1/n,n))
rmultinom(1,n,rep(1/n,n))
my_reg <- feols(LWAGE ~ -1 + i(ED_LEVEL) + EXP + I(EXP^2) + WKS + OCC +
SOUTH + SMSA + MS + UNION + FEM, data = data, weights=rmultinom(1,n,rep(1/n,n)))
my_reg
n <- dim(data)[1]
my_reg <- feols(LWAGE ~ -1 + i(ED_LEVEL) + EXP + I(EXP^2) + WKS + OCC +
SOUTH + SMSA + MS + UNION + FEM,
data = data,
# multiplier bootstrap
weights=rmultinom(1,n,rep(1/n,n)))
my_reg$coefficients[7] + 2 * my_reg$coefficients[8]
results<-zeros(500,1)
n <- dim(data)[1]
for (i in 1:500){
my_reg <- feols(LWAGE ~ -1 + i(ED_LEVEL) + EXP + I(EXP^2) + WKS + OCC +
SOUTH + SMSA + MS + UNION + FEM,
data = data,
# multiplier bootstrap
weights=rmultinom(1,n,rep(1/n,n)))
results[i]<- my_reg$coefficients[7] + 2 * my_reg$coefficients[8]
}
n <- dim(data)[1]
results <- rep(0,500)
for (i in 1:500){
my_reg <- feols(LWAGE ~ -1 + i(ED_LEVEL) + EXP + I(EXP^2) + WKS + OCC +
SOUTH + SMSA + MS + UNION + FEM,
data = data,
# multiplier bootstrap
weights=rmultinom(1,n,rep(1/n,n)))
results[i]<- my_reg$coefficients[7] + 2 * my_reg$coefficients[8]
}
results
hist(results)
n <- dim(data)[1]
results <- rep(0,1000)
for (i in 1:1000){
my_reg <- feols(LWAGE ~ -1 + i(ED_LEVEL) + EXP + I(EXP^2) + WKS + OCC +
SOUTH + SMSA + MS + UNION + FEM,
data = data,
# multiplier bootstrap
weights=rmultinom(1,n,rep(1/n,n)))
results[i]<- my_reg$coefficients[7] + 2 * my_reg$coefficients[8]
}
hist(results)
quantile(results)
quantile(results,0.25)
quantile(results,0.025)
quantile(results,c(0.025,.975))
quantile(results,c(0.025,.975))
quantile(results,c(0.025,.975))
quantile(results,c(0.025,.975))
print(mean(results))
print(quantile(results,c(0.025,.975)))
hist(results)
# quick bootstrap comparison
n <- dim(data)[1]
results <- rep(0,1000)
for (i in 1:1000){
my_reg <- feols(LWAGE ~ -1 + i(ED_LEVEL) + EXP + I(EXP^2) + WKS + OCC +
SOUTH + SMSA + MS + UNION + FEM,
data = data,
# multiplier bootstrap
weights=rmultinom(1,n,rep(1/n,n)))
results[i]<- my_reg$coefficients[7] + 2 * my_reg$coefficients[8]
}
print(mean(results))
print(quantile(results,c(0.025,.975)))
hist(results)
avg_slopes(reg_2, variables = "EXP", vcov = "HC1")
reg_2
avg_slopes(reg_wrong, variables = "EXP", vcov = "HC1")
avg_slopes(reg_2, variables = "EXP", vcov = "HC1")
n <- dim(data)[1]
results <- rep(0,1000)
for (i in 1:1000){
data$my_weights <- rmultinom(1,n,rep(1/n,n))
my_reg <- feols(LWAGE ~ -1 + i(ED_LEVEL) + EXP + I(EXP^2) + WKS + OCC +
SOUTH + SMSA + MS + UNION + FEM,
data = data %>% filter(my_weights >0),
# multiplier bootstrap
weights=my_weights)
results[i]<- my_reg$coefficients[7] + 2 * my_reg$coefficients[8]
}
# quick bootstrap comparison
n <- dim(data)[1]
results <- rep(0,1000)
for (i in 1:1000){
data$my_weights <- rmultinom(1,n,rep(1/n,n))
my_reg <- feols(LWAGE ~ -1 + i(ED_LEVEL) + EXP + I(EXP^2) + WKS + OCC +
SOUTH + SMSA + MS + UNION + FEM,
data = data %>% filter(data$my_weights >0),
# multiplier bootstrap
weights=my_weights)
results[i]<- my_reg$coefficients[7] + 2 * my_reg$coefficients[8]
}
n <- dim(data)[1]
results <- rep(0,1000)
for (i in 1:1000){
data$my_weights <- rmultinom(1,n,rep(1/n,n))
my_reg <- feols(LWAGE ~ -1 + i(ED_LEVEL) + EXP + I(EXP^2) + WKS + OCC +
SOUTH + SMSA + MS + UNION + FEM,
data = data %>% filter(data$my_weights >0),
# multiplier bootstrap
weights=data$my_weights)
results[i]<- my_reg$coefficients[7] + 2 * my_reg$coefficients[8]
}
data
data$my_weights
data$my_weights/sum(data$my_weights)
data$my_weights/sum(data$my_weights)
data$my_weights/sum(data$my_weights) * data$EXP
data$my_weights/sum(data$my_weights) * data$EXP
# quick bootstrap comparison
n <- dim(data)[1]
results <- rep(0,1000)
for (i in 1:1000){
my_weights
data$my_weights <- rmultinom(1,n,rep(1/n,n))
my_reg <- feols(LWAGE ~ -1 + i(ED_LEVEL) + EXP + I(EXP^2) + WKS + OCC +
SOUTH + SMSA + MS + UNION + FEM,
data = data,
# multiplier bootstrap
weights=my_weights)
results[i]<- my_reg$coefficients[7] + 2 * my_reg$coefficients[8] * data$my_weights/sum(data$my_weights) * data$EXP
}
n <- dim(data)[1]
results <- rep(0,1000)
for (i in 1:1000){
my_weights <-  rmultinom(1,n,rep(1/n,n))
my_reg <- feols(LWAGE ~ -1 + i(ED_LEVEL) + EXP + I(EXP^2) + WKS + OCC +
SOUTH + SMSA + MS + UNION + FEM,
data = data,
# multiplier bootstrap
weights=my_weights)
results[i]<- my_reg$coefficients[7] + 2 * my_reg$coefficients[8] * data$my_weights/sum(data$my_weights) * data$EXP
}
print(mean(results))
print(quantile(results,c(0.025,.975)))
hist(results)
# quick bootstrap comparison
n <- dim(data)[1]
results <- rep(0,1000)
for (i in 1:1000){
my_weights <-  rmultinom(1,n,rep(1/n,n))/n
my_reg <- feols(LWAGE ~ -1 + i(ED_LEVEL) + EXP + I(EXP^2) + WKS + OCC +
SOUTH + SMSA + MS + UNION + FEM,
data = data,
# multiplier bootstrap
weights=my_weights)
results[i]<- my_reg$coefficients[7] +
2 * my_reg$coefficients[8] * my_weights* data$EXP
}
print(mean(results))
# [1] 0.04090399
print(quantile(results,c(0.025,.975)))
#2.5%      97.5%
#   0.03648881 0.04490907
hist(results)
results
data$EXP
data$EXP
results[i]<- mean(my_reg$coefficients[7] +
2 * my_reg$coefficients[8] * data$EXP)
results[i]
results[i]<- sum(my_reg$coefficients[7] +
2 * my_reg$coefficients[8] * my_weights *data$EXP)
results[i]
my_weights
# quick bootstrap comparison
n <- dim(data)[1]
results <- rep(0,1000)
for (i in 1:1000){
my_weights <-  rmultinom(1,n,rep(1/n,n))/n
my_reg <- feols(LWAGE ~ -1 + i(ED_LEVEL) + EXP + I(EXP^2) + WKS + OCC +
SOUTH + SMSA + MS + UNION + FEM,
data = data,
# multiplier bootstrap
weights=my_weights)
results[i]<- sum(my_reg$coefficients[7] +
2 * my_reg$coefficients[8] * my_weights *data$EXP)
}
print(mean(results))
my_weights
sum(myweights)
sum(my_weights)
my_weights *data$EXP
2 * my_reg$coefficients[8] * my_weights *data$EXP
sum(2 * my_reg$coefficients[8] * my_weights *data$EXP)
my_reg$coefficients[7]
my_reg$coefficients[7] + sum(2 * my_reg$coefficients[8] * my_weights *data$EXP)
# quick bootstrap comparison
n <- dim(data)[1]
results <- rep(0,1000)
for (i in 1:1000){
my_weights <-  rmultinom(1,n,rep(1/n,n))/n
my_reg <- feols(LWAGE ~ -1 + i(ED_LEVEL) + EXP + I(EXP^2) + WKS + OCC +
SOUTH + SMSA + MS + UNION + FEM,
data = data,
# multiplier bootstrap
weights=my_weights)
results[i]<- my_reg$coefficients[7] +
sum(2 * my_reg$coefficients[8] * my_weights *data$EXP)
}
print(mean(results))
print(quantile(results,c(0.025,.975)))
hist(results)
hist(results,bins=20)
?hist
hist(results,20)
print(mean(results))
# [1] 0.01342801
print(quantile(results,c(0.025,.975)))
#2.5%      97.5%
#   0.01219617 0.01463365
hist(results,20)
feols(LWAGE ~ -1 + i(ED_LEVEL,FEM) + EXP + I(EXP^2) + WKS + OCC +
SOUTH + SMSA + MS + UNION,
data = data)
feols(LWAGE ~ -1 + i(ED_LEVEL,i.FEM) + EXP + I(EXP^2) + WKS + OCC +
SOUTH + SMSA + MS + UNION,
data = data)
feols(LWAGE ~ -1 + i(ED_LEVEL,EXP) + EXP + I(EXP^2) + WKS + OCC +
SOUTH + SMSA + MS + UNION,
data = data)
feols(LWAGE ~ -1 + i(ED_LEVEL) +  i(FEM,EXP) + EXP + I(EXP^2) + WKS + OCC +
SOUTH + SMSA + MS + UNION,
data = data)
feols(LWAGE ~ -1 + i(ED_LEVEL) +  i(FEM,poly(EXP,2)) + EXP + I(EXP^2) + WKS + OCC +
SOUTH + SMSA + MS + UNION,
data = data)
feols(LWAGE ~ -1 + i(ED_LEVEL) +  i(FEM,poly(EXP,2)) + EXP  + WKS + OCC +
SOUTH + SMSA + MS + UNION,
data = data)
summary(reg_1)
reg_8 <- feols(LWAGE ~ ED_NOISY + EXP + I(EXP^2) + WKS + OCC + SOUTH + SMSA
+ MS + FEM + UNION, data = data %>% mutate(ED_NOISY = + noise))
noise <- sample(-1:1,dim(data)[1],replace=T)
reg_8 <- feols(LWAGE ~ ED_NOISY + EXP + I(EXP^2) + WKS + OCC + SOUTH + SMSA
+ MS + FEM + UNION, data = data %>% mutate(ED_NOISY = + noise))
summary(reg_8)
data <- cbind(data, EDFEM=data$ED*data$FEM)
reg_8
reg_8 <- feols(LWAGE ~ ED_NOISY + EXP + I(EXP^2) + WKS + OCC + SOUTH + SMSA
+ MS + FEM + UNION, data = data %>% mutate(ED_NOISY = + noise))
summary(reg_8)
etable(list(reg_1,reg_8), export='./table_noise.png')
etable(list(reg_1,reg_2,reg_3,reg_4), export='./table_1.png')
etable(list(reg_1,reg_8), export='./table_noise.png')
